$(document).ready(function(){id=$("#mhs").val();$("#mhs").select2({theme:"bootstrap input-md",dropdownParent:"#modal-form"});$("body .dropdown-toggle").dropdown();$('select#mhs').change(function(){$("#data").DataTable().destroy();loadtagihan();});$('select#tahun').change(function(){$("#data").DataTable().destroy();loadtagihan();});$('select#kdsmster').change(function(){$("#data").DataTable().destroy();loadtagihan();});$('select#kelompok').change(function(){$("#data").DataTable().destroy();loadtagihan();});$("#selectall").change(function(){$("input:checkbox").prop('checked',$(this).prop("checked"));loadjumlah(cekbox());});$("body").on("click","input[name='tarif[]']",function(){loadjumlah(cekbox());});$("#modal-form").on("shown.bs.modal",function(){loadtagihan();});});function cekbox(){var favorite=[];$.each($("input[name='tarif[]']:checked"),function(){favorite.push($(this).val());});data=JSON.stringify(favorite);}
function loadjumlah(){$.post(baseurl+"getjumlah",{data:data},function(data,status){if(status=="success"){dt=JSON.parse(data);$("#modal-form .modal-body #total").val(dt);}});}
function loadtagihan(){id=$("select#mhs").val();tahun=$('select#tahun').val();sms=$('select#kdsmster').val();kel=$('select#kelompok').val();tabletarif=$("#data").DataTable({"ajax":{"url":baseurl+"gettarif","dataType":"json","data":{id:id,tahun:tahun,kdsmster:sms,kelompok:kel},},"sServerMethod":"POST","bServerSide":true,"bAutoWidth":true,"bDeferRender":true,"bSortClasses":false,"bscrollCollapse":true,"bStateSave":true,"responsive":true,"scrollX":true,"sScrollX":true,"fixedHeader":true,"iDisplayLength":10,"language":{"decimal":",","thousands":"."},"columnDefs":[{"orderable":false,"targets":0}]});}